"use strict";(self["webpackChunkconference_booking"]=self["webpackChunkconference_booking"]||[]).push([[519],{7519:function(e,t,o){o.r(t),o.d(t,{default:function(){return K}});var s=o(3396),r=o(9242),a=o(7139);const i={class:"container vh-100",style:{"padding-top":"10px"}},l={class:"w-100"},n=(0,s._)("div",{class:"my-2 d-flex justify-content-end"},null,-1),d={class:"w-100"},c=(0,s._)("thead",{class:"text-center"},[(0,s._)("tr",{class:""},[(0,s._)("th",{style:{border:"1px solid gainsboro"},class:"py-2"},"No."),(0,s._)("th",{style:{border:"1px solid gainsboro"}},"ສະຖານະ"),(0,s._)("th",{style:{border:"1px solid gainsboro"}},"ເວລາ"),(0,s._)("th",{style:{border:"1px solid gainsboro"}},"ຫົວຂໍ້"),(0,s._)("th",{style:{border:"1px solid gainsboro"}},"ພາກສ່ວນ"),(0,s._)("th",{style:{border:"1px solid gainsboro"}},"ຊື່ຫ້ອງ"),(0,s._)("th",{style:{border:"1px solid gainsboro"}},"ຊື່ ແລະ ນາມສະກຸນ"),(0,s._)("th",{style:{border:"1px solid gainsboro"}},"ເບີ້ໂທລະສັບ"),(0,s._)("th",{style:{border:"1px solid gainsboro"}},"ຈັດການ")])],-1),g={class:"text-center"},u={style:{border:"1px solid gainsboro"},class:"py-3"},b={style:{border:"1px solid gainsboro",margin:"10px",padding:"0px"}},p={style:{border:"1px solid gainsboro"}},h={style:{border:"1px solid gainsboro"}},w={style:{border:"1px solid gainsboro"}},_={style:{border:"1px solid gainsboro"}},m={style:{border:"1px solid gainsboro"}},y={style:{border:"1px solid gainsboro"}},P={style:{border:"1px solid gainsboro"}},x={class:"dropdown"},k=(0,s._)("button",{class:"btn btn-outline-dark dropdown-toggle",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,s._)("i",{class:"bi bi-three-dots-vertical"})],-1),f={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},v=(0,s._)("button",{class:"dropdown-item"},[(0,s._)("i",{class:"bi bi-pencil-fill text-warning"}),(0,s.Uk)(" ແກ້ໄຂ")],-1),C=["onClick"],z=(0,s._)("i",{class:"bi bi-trash-fill text-danger"},null,-1),A={class:"mt-4"},B={"aria-label":"Page navigation"},D={class:"pagination justify-content-center"},T=(0,s._)("span",{"aria-hidden":"true"},"«",-1),L=[T],M=["onClick"],R=(0,s._)("span",{"aria-hidden":"true"},"»",-1),E=[R];function $(e,t,o,T,R,$){const j=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",l,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>R.searchQuery=e),type:"text",class:"form-control ps-4 w-25 my-2 mx-auto border-1",placeholder:"ຄົ້ນຫາ..."},null,512),[[r.nr,R.searchQuery]])]),n,(0,s._)("table",d,[c,(0,s._)("tbody",g,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)($.displayedBookAll,((e,t)=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",u,(0,a.zw)((R.currentPage-1)*R.rowsPerPage+t+1),1),(0,s._)("td",b,[(0,s._)("div",{class:"py-1 p-0 mx-1",style:(0,a.j5)([{"background-color":e.isActive?"#e5f9db":"#fad4d4",color:e.isActive?"#388e3c":"red"},{"border-radius":"100px","font-weight":"400"}])},(0,a.zw)(e.isActive?"Active":"Deactivate"),5)]),(0,s._)("td",p,(0,a.zw)($.formatDate(e.date))+" > "+(0,a.zw)(e.startTime)+" - "+(0,a.zw)(e.endTime),1),(0,s._)("td",h,(0,a.zw)(e.title),1),(0,s._)("td",w,(0,a.zw)(e.department),1),(0,s._)("td",_,(0,a.zw)(e.title_room),1),(0,s._)("td",m,(0,a.zw)(e.name),1),(0,s._)("td",y,(0,a.zw)(e.phone),1),(0,s._)("td",P,[(0,s._)("div",x,[k,(0,s._)("ul",f,[(0,s.Wm)(j,{to:{name:"update",params:{id:e._id}}},{default:(0,s.w5)((()=>[v])),_:2},1032,["to"]),(0,s._)("button",{onClick:t=>$.showDeleteConfirmation(e._id),class:"dropdown-item",type:"button"},[z,(0,s.Uk)(" ຍົກເລີກ ")],8,C)])])])])))),128))])]),(0,s._)("div",A,[(0,s._)("nav",B,[(0,s._)("ul",D,[(0,s._)("li",{class:(0,a.C_)(["page-item",{disabled:1===R.currentPage}])},[(0,s._)("button",{class:"page-link",onClick:t[1]||(t[1]=(...e)=>$.previousPage&&$.previousPage(...e)),"aria-label":"Previous"},L)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)($.visiblePageRange,(e=>((0,s.wg)(),(0,s.iD)("li",{class:(0,a.C_)(["page-item",{active:R.currentPage===e}]),key:e},[(0,s._)("button",{class:"page-link",onClick:t=>$.goToPage(e)},(0,a.zw)(e),9,M)],2)))),128)),(0,s._)("li",{class:(0,a.C_)(["page-item",{disabled:R.currentPage===$.totalPages}])},[(0,s._)("button",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>$.nextPage&&$.nextPage(...e)),"aria-label":"Next"},E)],2)])])])])}o(7658);var j=o(4161),Q=o(2492),U=o.n(Q),N=o(9674),Z={data(){return{allRooms:[],activeBookId:null,showButtons:!1,bookAll:[],currentPage:1,rowsPerPage:8,searchQuery:"",showDateNowData:!1}},computed:{visiblePageRange(){const e=5,t=Math.max(this.currentPage-Math.floor(e/2),1),o=Math.min(t+e-1,this.totalPages),s=[];for(let r=t;r<=o;r++)s.push(r);return s},displayedBookAll(){const e=(this.currentPage-1)*this.rowsPerPage,t=e+this.rowsPerPage;return this.filteredBookAll.slice(e,t)},totalPages(){return Math.ceil(this.bookAll.length/this.rowsPerPage)},filteredBookAll(){const e=this.searchQuery.toLowerCase();return this.bookAll.filter((t=>t.title.toLowerCase().includes(e)||t.department.toLowerCase().includes(e)||t.title_room.toLowerCase().includes(e)||t.name.toLowerCase().includes(e)||t.phone.toLowerCase().includes(e)))}},methods:{previousPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},getRooms(){j.Z.get(`${N.z}/rooms`).then((e=>{this.allRooms=e.data})).catch((e=>{console.error("Error fetching rooms:",e)}))},async deleteEvent(e){try{const t=await fetch(`${N.z}/booking/cancel/${e}`,{method:"PUT"});if(!t.ok)throw new Error(`Failed to delete event with status: ${t.status}`);const o=await t.json();console.log(o.message),location.reload()}catch(t){console.error("Error deleting event:",t)}},showDeleteConfirmation(e){U().fire({title:"ເຈົ້າຕ້ອງການທີ່ຈະລຶບມັນ ຫຼື ບໍ່?",icon:"warning",showCancelButton:!0,confirmButtonText:"ຕົກລົງ",cancelButtonText:"ຍົກເລີກ"}).then((t=>{t.isConfirmed&&this.deleteEvent(e)}))},formatDate(e){const t=new Date(e),o=t.toISOString().split("T")[0];return o},getBookAll(){j.Z.get(`${N.z}/booking`).then((e=>{this.bookAll=e.data.reverse()})).catch((e=>{console.error(e)}))}},mounted(){this.getBookAll(),this.getRooms()}},H=o(89);const I=(0,H.Z)(Z,[["render",$]]);var K=I}}]);
//# sourceMappingURL=519.68a95ce2.js.map