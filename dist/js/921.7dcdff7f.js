"use strict";(self["webpackChunkconference_booking"]=self["webpackChunkconference_booking"]||[]).push([[921],{4921:function(o,e,t){t.r(e),t.d(e,{default:function(){return A}});var r=t(3396),s=t(9242),n=t(7139);const l={class:"container w-100 vh-100 my-auto d-flex align-items-center"},i={class:"my-2"},a=(0,r._)("label",{for:""},"ຫົວຂໍ້ການປະຊຸມ",-1),m={class:"row"},c={class:"my-4 col-lg-6"},d=(0,r._)("label",{for:""},"ວັນ, ເດືອນ , ປີ",-1),u=["min"],b={class:"my-4 col-lg-6"},p=(0,r._)("label",{for:""},"ຫ້ອງປະຊຸມ",-1),k=["onUpdate:modelValue"],h={class:"row my-4"},f={class:"col-6"},g=(0,r._)("div",{class:"d-flex"},[(0,r._)("label",{class:"me-5",for:"timeInput"},"ເວລາເລີ່ມ")],-1),y=["value"],_={class:"col-6"},w=(0,r._)("div",{class:"d-flex"},[(0,r._)("label",{class:"me-5",for:"timeInput"},"ເວລາສິ້ນສຸດ")],-1),v=["value"],T={class:"mt-4"},D=(0,r._)("label",{for:""},"ພະແນກ ຫຼື ບໍລິສັດ",-1),N={class:"my-4"},S=(0,r._)("label",{for:""},"ຊື່ ແລະ ນາມສະກຸນ",-1),R={class:"my-4"},x=(0,r._)("label",{for:""},"ເບີໂທລະສັບ",-1),P={class:"row justify-content-center"},U={class:"my-2 col-6"},V=(0,r._)("div",{class:"mt-2 col-6"},[(0,r._)("button",{type:"submit",class:"btn btn-primary w-100"},"ຕົກລົງ")],-1);function B(o,e,t,B,E,O){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",l,[(0,r._)("form",{onSubmit:e[8]||(e[8]=(0,s.iM)(((...o)=>O.createBooking&&O.createBooking(...o)),["prevent"])),action:"",class:"w-50 mx-auto py-2 px-5 bg-light shadow-lg"},[(0,r._)("div",i,[a,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>E.bookTitle=o),type:"text",class:"form-control"},null,512),[[s.nr,E.bookTitle]])]),(0,r._)("div",m,[(0,r._)("div",c,[d,(0,r.wy)((0,r._)("input",{class:"form-control",type:"date","onUpdate:modelValue":e[1]||(e[1]=o=>E.bookDate=o),min:O.minDate,required:"",placeholder:"ວ.ດ.ປ"},null,8,u),[[s.nr,E.bookDate]])]),(0,r._)("div",b,[p,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(E.Rooms,(o=>((0,r.wg)(),(0,r.iD)("div",{key:o._id},[o.roomNumber.toString()===t.roomNumber.toString()?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,"onUpdate:modelValue":e=>o.title_room=e,type:"text",class:"form-control",disabled:""},null,8,k)),[[s.nr,o.title_room]]):(0,r.kq)("",!0)])))),128))])]),(0,r._)("div",h,[(0,r._)("div",f,[g,(0,r.wy)((0,r._)("select",{id:"startTimeInput",class:"form-select","onUpdate:modelValue":e[2]||(e[2]=o=>E.bookTimeS=o)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(O.startTimes,(o=>((0,r.wg)(),(0,r.iD)("option",{key:o,value:o},(0,n.zw)(o),9,y)))),128))],512),[[s.bM,E.bookTimeS]])]),(0,r._)("div",_,[w,(0,r.wy)((0,r._)("select",{id:"endTimeInput",class:"form-select","onUpdate:modelValue":e[3]||(e[3]=o=>E.bookTimeE=o)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(O.endTimes,(o=>((0,r.wg)(),(0,r.iD)("option",{key:o,value:o},(0,n.zw)(o),9,v)))),128))],512),[[s.bM,E.bookTimeE]])])]),(0,r._)("div",T,[D,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>E.bookDP=o),type:"text",class:"form-control"},null,512),[[s.nr,E.bookDP]])]),(0,r._)("div",N,[S,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>E.bookName=o),type:"text",class:"form-control",required:""},null,512),[[s.nr,E.bookName]])]),(0,r._)("div",R,[x,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>E.bookPhone=o),type:"text",class:"form-control",required:""},null,512),[[s.nr,E.bookPhone]])]),(0,r._)("div",P,[(0,r._)("div",U,[(0,r._)("button",{onClick:e[7]||(e[7]=(...o)=>O.goBackAndReload&&O.goBackAndReload(...o)),type:"button",class:"btn btn-danger w-100"},"ຍົກເລີກ")]),V])],32)])])}t(7658);var E=t(2492),O=t.n(E),$=t(9674),q={props:{roomNumber:{type:Number,required:!0}},data(){return{Rooms:[],bookTitle:"",bookDate:"",bookTimeS:"",bookTimeE:"",bookDP:"",bookName:"",bookPhone:"",bookRoom:this.roomNumber}},created(){console.log("roomNumber prop:",this.roomNumber)},computed:{minDate(){const o=(new Date).toISOString().split("T")[0];return o},startTimes(){return this.generateTimeOptions(8,20,30)},endTimes(){return this.generateTimeOptions(8,20,30)}},mounted(){this.fetchRooms(),console.log(this.roomNumber),console.log("Rooms:",this.Rooms),console.log("roomNumber:",this.roomNumber)},methods:{async createBooking(){const o={title:this.bookTitle,date:this.bookDate,startTime:this.bookTimeS,endTime:this.bookTimeE,department:this.bookDP,name:this.bookName,phone:this.bookPhone,roomNumber:this.bookRoom};try{const e=await fetch(`${$.z}/booking/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});201===e.status?O().fire("ການຈອງຂອງທ່ານສຳເລັດ","","success").then((()=>{this.$router.go(-1)})):409===e.status?O().fire("ຫ້ອງປະຊຸມບໍ່ຫວ່າງ","ກະລຸນາປ່ຽນເວລາຂອງທ່ານ","error"):O().fire("An error occurred","","error")}catch(e){}},generateTimeOptions(o,e,t){const r=[];for(let s=o;s<=e;s++)for(let o=0;o<60;o+=t){const e=`${s.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")} ${s<12?"ເຊົ້າ":"ແລງ"}`;r.push(e)}return r},async fetchRooms(){try{const o=await fetch(`${$.z}/rooms`);if(o.ok){const e=await o.json();this.Rooms=e,console.log(this.Rooms)}else console.error("Error fetching rooms data:",o.status)}catch(o){console.error("Error fetching rooms data:",o)}},goBackAndReload(){window.history.back()}}},I=t(89);const z=(0,I.Z)(q,[["render",B]]);var A=z}}]);
//# sourceMappingURL=921.7dcdff7f.js.map