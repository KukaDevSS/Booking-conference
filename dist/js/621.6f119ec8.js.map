{"version":3,"file":"js/621.6f119ec8.js","mappings":"uQACSA,MAAM,2B,UACmBC,EAAAA,EAAAA,GAAmJ,UAA3ID,MAAM,iBAAiBE,MAAA,gC,EAAmCD,EAAAA,EAAAA,GAAgE,KAA7DD,MAAM,sDAAkD,QAAK,cAAQ,K,GAC/JA,MAAM,yBAAyBE,MAAA,gC,UACpCD,EAAAA,EAAAA,GAUQ,SAVDD,MAAM,GAAGE,MAAA,gC,EACdD,EAAAA,EAAAA,GAQK,MARDD,MAAM,GAAGE,MAAA,gC,EACXD,EAAAA,EAAAA,GAAsE,MAAlEC,MAAA,+BAAqCF,MAAM,aAAa,UAC5DC,EAAAA,EAAAA,GAA0D,MAAtDC,MAAA,+BAAqCF,MAAM,IAAG,QAClDC,EAAAA,EAAAA,GAA8D,MAA1DC,MAAA,+BAAqCF,MAAM,IAAG,YAClDC,EAAAA,EAAAA,GAA+D,MAA3DC,MAAA,+BAAqCF,MAAM,IAAG,aAClDC,EAAAA,EAAAA,GAA+D,MAA3DC,MAAA,+BAAqCF,MAAM,IAAG,aAClDC,EAAAA,EAAAA,GAA6D,MAAzDC,MAAA,+BAAqCF,MAAM,IAAG,WAClDC,EAAAA,EAAAA,GAA4D,MAAxDC,MAAA,+BAAqCF,MAAM,IAAG,aAAK,K,GAKnDE,MAAA,+BAAqCF,MAAM,I,GAC3CE,MAAA,+BAAqCF,MAAM,I,aAG3CE,MAAA,+BAAsCF,MAAM,I,GAC5CE,MAAA,+BAAqCF,MAAM,I,GAC3CA,MAAM,GAAGE,MAAA,8C,GACTF,MAAM,GAAGE,MAAA,4D,GACJF,MAAM,0B,sDAQXC,EAAAA,EAAAA,GAA4B,QAAtBD,MAAM,UAAQ,W,GAIpBE,MAAA,+BAAqCF,MAAM,I,GACtCA,MAAM,0CAA0CE,MAAA,sC,UACjDD,EAAAA,EAAAA,GAES,UAFDD,MAAM,uCAAuCG,KAAK,SAASC,GAAG,qBAAqB,iBAAe,WAAW,gBAAc,S,EAChIH,EAAAA,EAAAA,GAAyC,KAAtCD,MAAM,gCAA2B,K,GAEnCA,MAAM,gBAAgB,kBAAgB,sB,UACkDC,EAAAA,EAAAA,GAA0F,YAAtFA,EAAAA,EAAAA,GAAiF,KAA9ED,MAAM,iBAAe,EAACC,EAAAA,EAAAA,GAA8C,KAA3CD,MAAM,oCAAgC,QAAK,cAAM,K,wBAEzKC,EAAAA,EAAAA,GAA4C,KAAzCD,MAAM,gCAA8B,W,GAQpDA,MAAM,Q,GACJ,aAAW,mB,GACVA,MAAM,qC,UAGJC,EAAAA,EAAAA,GAAuC,QAAjC,cAAY,QAAO,KAAO,K,GAAhCI,G,wBAQAJ,EAAAA,EAAAA,GAAuC,QAAjC,cAAY,QAAO,KAAO,K,GAAhCK,G,0EAjEZC,EAAAA,EAAAA,IAuEM,MAvENC,EAuEM,EAtEJC,EAAAA,EAAAA,IAA6LC,EAAA,CAAhLC,GAAG,aAAW,C,kBAAC,IAAmJ,CAAnJC,K,OAC5BX,EAAAA,EAAAA,GAiDQ,QAjDRY,EAiDQ,CAhDNC,GAWAb,EAAAA,EAAAA,GAoCQ,6BAnCNM,EAAAA,EAAAA,IAkCKQ,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAlCsBC,EAAAC,kBAAgB,CAA/BC,EAAKC,M,WAAjBb,EAAAA,EAAAA,IAkCK,MAlCyCc,IAAKF,EAAKG,Y,EACtDrB,EAAAA,EAAAA,GAAyG,KAAzGsB,GAAyGC,EAAAA,EAAAA,KAAlDC,EAAAC,YAAc,GAAKD,EAAAE,YAAcP,EAAQ,GAAH,IAC7FnB,EAAAA,EAAAA,GAEK,KAFL2B,EAEK,EADH3B,EAAAA,EAAAA,GAAwF,OAAlF4B,IAAKZ,EAAAa,oBAAoBX,EAAKY,OAAQC,IAAI,GAAG9B,MAAA,gC,aAErDD,EAAAA,EAAAA,GAA6E,KAA7EgC,GAA6ET,EAAAA,EAAAA,IAAvBL,EAAKe,YAAU,IACrEjC,EAAAA,EAAAA,GAAyE,KAAzEkC,GAAyEX,EAAAA,EAAAA,IAApBL,EAAKiB,SAAO,IACjEnC,EAAAA,EAAAA,GAAyF,KAAzFoC,GAAyFb,EAAAA,EAAAA,IAAxBL,EAAKmB,aAAW,IACjFrC,EAAAA,EAAAA,GAYK,KAZLsC,EAYK,EAXHtC,EAAAA,EAAAA,GASQ,QATRuC,EASQ,EARNvC,EAAAA,EAAAA,GAME,SALAE,KAAK,WACLH,MAAM,6CACL,mBAAkBmB,EAAKG,WACvBmB,SAAMC,GAAEzB,EAAA0B,WAAWxB,EAAKG,YACxBsB,QAAyB,SAAhBzB,EAAK0B,Q,WAEjBC,OAIJ7C,EAAAA,EAAAA,GAYK,KAZL8C,EAYK,EAXD9C,EAAAA,EAAAA,GAUM,MAVN+C,EAUM,CATFC,GAGAhD,EAAAA,EAAAA,GAKK,KALLiD,EAKK,EAJHzC,EAAAA,EAAAA,IAAkMC,EAAA,CAApLC,GAAE,CAAAwC,KAAA,aAAAC,OAAA,CAAAhD,GAAiCe,EAAKkC,IAAG/B,WAAcH,EAAKG,c,mBAAc,IAA0F,CAA1FgC,K,mBAC1FrD,EAAAA,EAAAA,GAES,UAFAsD,QAAKb,GAAEzB,EAAAuC,WAAWrC,EAAKG,YAAatB,MAAM,gBAAgBG,KAAK,U,CACtEsD,GAA4C,kBAC9C,gB,WAOhBxD,EAAAA,EAAAA,GAkBM,MAlBNyD,EAkBM,EAjBJzD,EAAAA,EAAAA,GAgBM,MAhBN0D,EAgBM,EAfJ1D,EAAAA,EAAAA,GAcK,KAdL2D,EAcK,EAbH3D,EAAAA,EAAAA,GAIK,MAJDD,OAAK6D,EAAAA,EAAAA,IAAA,CAAC,YAAW,UAAuC,IAAhBpC,EAAAC,gB,EAC1CzB,EAAAA,EAAAA,GAES,UAFDD,MAAM,YAAauD,QAAKO,EAAA,KAAAA,EAAA,OAAAC,IAAE9C,EAAA+C,cAAA/C,EAAA+C,gBAAAD,IAAc,aAAW,Y,sBAI7DxD,EAAAA,EAAAA,IAEKQ,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAFgCC,EAAAgD,YAARC,K,WAA7B3D,EAAAA,EAAAA,IAEK,MAFDP,OAAK6D,EAAAA,EAAAA,IAAA,CAAC,YAAW,QAA4DpC,EAAAC,cAAgBwC,KAA/C7C,IAAK6C,G,EACrDjE,EAAAA,EAAAA,GAA8E,UAAtEC,MAAA,GAASF,MAAM,YAAauD,QAAKb,GAAEzB,EAAAkD,SAASD,K,QAAUA,GAAI,EAAAE,IAAA,M,OAEpEnE,EAAAA,EAAAA,GAIK,MAJDD,OAAK6D,EAAAA,EAAAA,IAAA,CAAC,YAAW,UAAuBpC,EAAAC,cAAgBT,EAAAgD,e,EAC1DhE,EAAAA,EAAAA,GAES,UAFDD,MAAM,YAAauD,QAAKO,EAAA,KAAAA,EAAA,OAAAC,IAAE9C,EAAAoD,UAAApD,EAAAoD,YAAAN,IAAU,aAAW,Q,gDAanE,GACEO,IAAAA,GACE,MAAO,CACLC,MAAO,GACPC,gBAAiB,GACjB9C,YAAa,EACbC,YAAa,EAEjB,EACA8C,SAAS,CACPvD,gBAAAA,GACE,MAAMwD,GAAcC,KAAKjD,YAAc,GAAKiD,KAAKhD,YAC3CiD,EAAWF,EAAaC,KAAKhD,YACnC,OAAOgD,KAAKJ,MAAMM,MAAMH,EAAYE,EACtC,EACAX,UAAAA,GACE,OAAOa,KAAKC,KAAKJ,KAAKJ,MAAMS,OAASL,KAAKhD,YAC5C,GAEFsD,QAAS,CACPjB,YAAAA,GACMW,KAAKjD,YAAc,GACrBiD,KAAKjD,aAET,EACA2C,QAAAA,GACMM,KAAKjD,YAAciD,KAAKV,YAC1BU,KAAKjD,aAET,EACAyC,QAAAA,CAASD,GACHA,GAAQ,GAAKA,GAAQS,KAAKV,aAC5BU,KAAKjD,YAAcwC,EAEvB,EACApC,mBAAAA,CAAoBoD,GAElB,MAAQ,GAAEC,EAAAA,IAASD,GACrB,EACA,gBAAME,GACJ,IACE,MAAMC,QAAiBC,MAAO,GAAEH,EAAAA,WAC1BZ,QAAcc,EAASE,OAC7BZ,KAAKJ,MAAQA,EAAMiB,KAAKrE,IAAI,IACvBA,EACH0B,OAAQ8B,KAAKc,OAAOtE,EAAKG,YAAc,OAAS,YAEpD,CAAE,MAAOoE,GACPC,QAAQD,MAAM,SAAUA,EAC1B,CACF,EACA,gBAAM/C,CAAWrB,GACf,MAAMsE,EAAYjB,KAAKc,OAAOnE,GACxBuE,EAASD,EAAY,IAAM,IAEjC,IACE,MAAMP,QAAiBC,MACpB,GAAEH,EAAAA,WAAgBU,KAAUvE,IAC7B,CACEwE,OAAQ,QAINxB,QAAae,EAASE,OAC5BZ,KAAKH,gBAAkBF,EAAKyB,QAG5B,MAAMC,EAAYrB,KAAKJ,MAAM0B,WAC1B9E,GAASA,EAAKG,aAAeA,KAEb,IAAf0E,IACFrB,KAAKJ,MAAMyB,GAAWnD,OAAoB,MAAXgD,EAAiB,OAAS,UAI3DK,aAAaC,QAAS,QAAO7E,IAAcuE,EAC7C,CAAE,MAAOH,GACPC,QAAQD,MAAM,SAAUA,EAC1B,CACF,EACAD,MAAAA,CAAOnE,GACL,MAAsD,MAA/C4E,aAAaE,QAAS,QAAO9E,IACtC,EACA,gBAAMkC,CAAW6C,GACf,MAAMC,QAAqBC,IAAAA,KAAU,CACnCC,MAAO,wBAEPC,KAAM,UACNC,kBAAkB,EAClBC,kBAAmB,SACnBC,iBAAkB,UAClBC,gBAAgB,IAGlB,GAAIP,EAAaQ,YACf,IACE,MAAMzB,QAAiBC,MAAO,GAAEH,EAAAA,kBAAuBkB,IAAU,CAC/DP,OAAQ,WAEc,MAApBT,EAASxC,QAEX8B,KAAKJ,MAAQI,KAAKJ,MAAMwC,QAAQ5F,GAASA,EAAKG,aAAe+E,IAC7DE,IAAAA,KAAU,4BAA6B,GAAI,YAE3CA,IAAAA,KAAU,4CAA6C,GAAI,QAE/D,CAAE,MAAOb,GACPC,QAAQD,MAAM,SAAUA,EAC1B,CAEJ,GAEFsB,OAAAA,GACErC,KAAKS,YACP,G,QCzLJ,MAAM6B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://conference_booking/./src/components/TableDash.vue","webpack://conference_booking/./src/components/TableDash.vue?34cc"],"sourcesContent":["<template>\r\n    <div class=\"container bg-white mt-4\">\r\n      <router-link to=\"/add-room\"><button class=\"btn text-white\" style=\"background-color: #0d4c92;\"><i class=\"bi bi-plus-circle bg-transparent text-white me-1\"></i>ສ້າງຫ້ອງ</button></router-link>\r\n      <table class=\"text-center mt-4 w-100\" style=\"border: 1px solid gainsboro;\">\r\n        <thead class=\"\" style=\"border: 1px solid gainsboro;\">\r\n          <tr class=\"\" style=\"border: 1px solid gainsboro;\">\r\n            <th style=\"border: 1px solid gainsboro;\" class=\" py-2 px-2\">ລຳດັບ</th>\r\n            <th style=\"border: 1px solid gainsboro;\" class=\"\">ຮູບ</th>\r\n            <th style=\"border: 1px solid gainsboro;\" class=\"\">ຊື່ຫ້ອງ</th>\r\n            <th style=\"border: 1px solid gainsboro;\" class=\"\">ສະຖານທີ່</th>\r\n            <th style=\"border: 1px solid gainsboro;\" class=\"\">ລາຍລະອຽດ</th>\r\n            <th style=\"border: 1px solid gainsboro;\" class=\"\">ສະຖານະ</th>\r\n            <th style=\"border: 1px solid gainsboro;\" class=\"\">ແກ້ໄຂ</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"(room,index) in displayedBookAll\" :key=\"room.roomNumber\">\r\n            <td style=\"border: 1px solid gainsboro;\" class=\"\" >{{ (currentPage - 1) * rowsPerPage + index + 1 }}</td>\r\n            <td style=\"border: 1px solid gainsboro;\" class=\"\">\r\n              <img :src=\"getCompleteImageUrl(room.image)\" alt=\"\" style=\"width: 160px; height: 100px;\">\r\n            </td>\r\n            <td style=\"border: 1px solid gainsboro;\"  class=\"\">{{ room.title_room }}</td>\r\n            <td style=\"border: 1px solid gainsboro;\" class=\"\">{{ room.address }}</td>\r\n            <td class=\"\" style=\"width: 300px;border: 1px solid gainsboro\">{{ room.description }}</td>\r\n            <td class=\"\" style=\"width: 75px; height: 150px;border: 1px solid gainsboro\">\r\n              <label class=\"toggle-switch bg-light\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  class=\"room-toggle form-check-input form-check-lg\"\r\n                  :data-room-number=\"room.roomNumber\"\r\n                  @change=\"toggleRoom(room.roomNumber)\"\r\n                  :checked=\"room.status === 'Open'\"\r\n                />\r\n                <span class=\"slider\"></span>\r\n              </label>\r\n              <!-- <span class=\"status-text\">{{ room.status }}</span> -->\r\n            </td>\r\n            <td style=\"border: 1px solid gainsboro;\" class=\"\">\r\n                <div class=\"dropdown d-flex align-items-center ms-1\" style=\"padding-top: 0px; height: 130px;\">\r\n                    <button class=\"btn btn-outline-dark dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">     \r\n                       <i class=\"bi bi-three-dots-vertical\"></i>\r\n                    </button>\r\n                    <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\r\n                      <router-link :to=\"{name:'updateroom',params:{id: room._id, roomNumber: room.roomNumber}}\"><li><a class=\"dropdown-item\"><i class=\"bi bi-pencil-fill text-warning\"></i> ແກ້ໄຂ</a></li></router-link>\r\n                      <button @click=\"deleteRoom(room.roomNumber)\" class=\"dropdown-item\" type=\"button\">\r\n                        <i class=\"bi bi-trash-fill text-danger\"></i> ລຶບ\r\n                      </button> \r\n                    </ul>\r\n                </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <div class=\"mt-4\">\r\n        <nav aria-label=\"Page navigation\">\r\n          <ul class=\"pagination justify-content-center\">\r\n            <li class=\"page-item\" :class=\"{ 'disabled': currentPage === 1 }\">\r\n              <button class=\"page-link\" @click=\"previousPage\" aria-label=\"Previous\">\r\n                <span aria-hidden=\"true\">&laquo;</span>\r\n              </button>\r\n            </li>\r\n            <li class=\"page-item\" v-for=\"page in totalPages\" :key=\"page\" :class=\"{ 'active': currentPage === page }\">\r\n              <button style=\"\" class=\"page-link\" @click=\"goToPage(page)\">{{ page }}</button>\r\n            </li>\r\n            <li class=\"page-item\" :class=\"{ 'disabled': currentPage === totalPages }\">\r\n              <button class=\"page-link\" @click=\"nextPage\" aria-label=\"Next\">\r\n                <span aria-hidden=\"true\">&raquo;</span>\r\n              </button>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { IP_api } from '../../API_config';\r\n  import Swal from 'sweetalert2';\r\n  export default {\r\n    data() {\r\n      return {\r\n        rooms: [],\r\n        responseMessage: \"\",\r\n        currentPage: 1,\r\n        rowsPerPage: 3,\r\n      };\r\n    },\r\n    computed:{\r\n      displayedBookAll() {\r\n        const startIndex = (this.currentPage - 1) * this.rowsPerPage;\r\n        const endIndex = startIndex + this.rowsPerPage;\r\n        return this.rooms.slice(startIndex, endIndex);\r\n      },\r\n      totalPages() {\r\n        return Math.ceil(this.rooms.length / this.rowsPerPage);\r\n      },\r\n    },\r\n    methods: {\r\n      previousPage() {\r\n        if (this.currentPage > 1) {\r\n          this.currentPage--;\r\n        }\r\n      },\r\n      nextPage() {\r\n        if (this.currentPage < this.totalPages) {\r\n          this.currentPage++;\r\n        }\r\n      },\r\n      goToPage(page) {\r\n        if (page >= 1 && page <= this.totalPages) {\r\n          this.currentPage = page;\r\n        }\r\n      },\r\n      getCompleteImageUrl(relativeUrl) {\r\n        // const baseUrl = 'http://172.22.4.41:3000'; \r\n        return `${IP_api}${relativeUrl}`;\r\n      },\r\n      async fetchRooms() {\r\n        try {\r\n          const response = await fetch(`${IP_api}/rooms`);\r\n          const rooms = await response.json();\r\n          this.rooms = rooms.map((room) => ({\r\n            ...room,\r\n            status: this.isOpen(room.roomNumber) ? \"Open\" : \"Closed\",\r\n          }));\r\n        } catch (error) {\r\n          console.error(\"Error:\", error);\r\n        }\r\n      },\r\n      async toggleRoom(roomNumber) {\r\n        const isChecked = this.isOpen(roomNumber);\r\n        const action = isChecked ? \"0\" : \"1\";\r\n  \r\n        try {\r\n          const response = await fetch(\r\n            `${IP_api}/rooms/${action}/${roomNumber}`,\r\n            {\r\n              method: \"PUT\",\r\n            }\r\n          );\r\n  \r\n          const data = await response.json();\r\n          this.responseMessage = data.message;\r\n  \r\n          // Update the status text based on the toggle\r\n          const roomIndex = this.rooms.findIndex(\r\n            (room) => room.roomNumber === roomNumber\r\n          );\r\n          if (roomIndex !== -1) {\r\n            this.rooms[roomIndex].status = action === \"1\" ? \"Open\" : \"Closed\";\r\n          }\r\n  \r\n          // Store the state in localStorage\r\n          localStorage.setItem(`room_${roomNumber}`, action);\r\n        } catch (error) {\r\n          console.error(\"Error:\", error);\r\n        }\r\n      },\r\n      isOpen(roomNumber) {\r\n        return localStorage.getItem(`room_${roomNumber}`) === \"1\";\r\n      },\r\n      async deleteRoom(roomId) {\r\n        const swalResponse = await Swal.fire({\r\n          title: 'ເຈົ້າຕ້ອງການທີ່ຈະລຶບ?',\r\n          // text: 'You will not be able to recover this room!',\r\n          icon: 'warning',\r\n          showCancelButton: true,\r\n          confirmButtonText: 'ຕົກລົງ',\r\n          cancelButtonText: 'ຍົກເລີກ',\r\n          reverseButtons: true, \r\n        });\r\n  \r\n        if (swalResponse.isConfirmed) {\r\n          try {\r\n            const response = await fetch(`${IP_api}/rooms/delete/${roomId}`, {\r\n              method: 'DELETE',\r\n            });\r\n            if (response.status === 200) {\r\n              // Delete was successful, remove the room from the list\r\n              this.rooms = this.rooms.filter((room) => room.roomNumber !== roomId);\r\n              Swal.fire('Room deleted successfully', '', 'success');\r\n            } else {\r\n              Swal.fire('An error occurred while deleting the room', '', 'error');\r\n            }\r\n          } catch (error) {\r\n            console.error('Error:', error);\r\n          }\r\n        }\r\n      },\r\n    },\r\n    created() {\r\n      this.fetchRooms();\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  /* Your CSS styles here */\r\n  \r\n  </style>","import { render } from \"./TableDash.vue?vue&type=template&id=5b2d72f4&scoped=true\"\nimport script from \"./TableDash.vue?vue&type=script&lang=js\"\nexport * from \"./TableDash.vue?vue&type=script&lang=js\"\n\nimport \"./TableDash.vue?vue&type=style&index=0&id=5b2d72f4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5b2d72f4\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","type","id","_hoisted_25","_hoisted_28","_createElementBlock","_hoisted_1","_createVNode","_component_router_link","to","_hoisted_2","_hoisted_3","_hoisted_4","_Fragment","_renderList","$options","displayedBookAll","room","index","key","roomNumber","_hoisted_5","_toDisplayString","$data","currentPage","rowsPerPage","_hoisted_6","src","getCompleteImageUrl","image","alt","_hoisted_8","title_room","_hoisted_9","address","_hoisted_10","description","_hoisted_11","_hoisted_12","onChange","$event","toggleRoom","checked","status","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","name","params","_id","_hoisted_19","onClick","deleteRoom","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_normalizeClass","_cache","args","previousPage","totalPages","page","goToPage","_hoisted_27","nextPage","data","rooms","responseMessage","computed","startIndex","this","endIndex","slice","Math","ceil","length","methods","relativeUrl","IP_api","fetchRooms","response","fetch","json","map","isOpen","error","console","isChecked","action","method","message","roomIndex","findIndex","localStorage","setItem","getItem","roomId","swalResponse","Swal","title","icon","showCancelButton","confirmButtonText","cancelButtonText","reverseButtons","isConfirmed","filter","created","__exports__","render"],"sourceRoot":""}