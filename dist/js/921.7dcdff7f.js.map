{"version":3,"file":"js/921.7dcdff7f.js","mappings":"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","sources":["webpack://conference_booking/./src/components/BookingForm.vue","webpack://conference_booking/./src/components/BookingForm.vue?4314"],"sourcesContent":["<template>\r\n    <div>\r\n      <div class=\"container w-100 vh-100 my-auto d-flex align-items-center\">\r\n        <form @submit.prevent=\"createBooking\" action=\"\" class=\"w-50 mx-auto py-2 px-5 bg-light shadow-lg\">\r\n          <div class=\"my-2\">\r\n              <label for=\"\">ຫົວຂໍ້ການປະຊຸມ</label>\r\n              <input v-model=\"bookTitle\" type=\"text\" class=\"form-control\">\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"my-4 col-lg-6\">\r\n                <label for=\"\">ວັນ, ເດືອນ , ປີ</label>\r\n                <input class=\"form-control\" type=\"date\" v-model=\"bookDate\" :min=\"minDate\"  required placeholder=\"ວ.ດ.ປ\"/>\r\n            </div>\r\n            <div class=\"my-4 col-lg-6\">\r\n              <label for=\"\">ຫ້ອງປະຊຸມ</label>\r\n              <div v-for=\"room in Rooms\" :key=\"room._id\">\r\n                <input\r\n                  v-if=\"room.roomNumber.toString() === roomNumber.toString()\"\r\n                  v-model=\"room.title_room\"\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  disabled\r\n                >\r\n              </div>\r\n            </div>\r\n        </div>\r\n          <div class=\"row my-4\">\r\n              <div class=\"col-6\">\r\n                  <div class=\"d-flex\">\r\n                    <label class=\"me-5\" for=\"timeInput\">ເວລາເລີ່ມ</label>\r\n                  </div>\r\n                  <select id=\"startTimeInput\" class=\"form-select\" v-model=\"bookTimeS\">\r\n                    <option v-for=\"timeOption in startTimes\" :key=\"timeOption\" :value=\"timeOption\">{{ timeOption }}</option>\r\n                  </select>\r\n                  \r\n              </div>         \r\n              <div class=\"col-6\">\r\n                  <div class=\"d-flex\">\r\n                    <label class=\"me-5\" for=\"timeInput\">ເວລາສິ້ນສຸດ</label>\r\n                  </div>\r\n                  <select id=\"endTimeInput\" class=\"form-select\" v-model=\"bookTimeE\">\r\n                    <option v-for=\"timeOption in endTimes\" :key=\"timeOption\" :value=\"timeOption\">{{ timeOption }}</option>\r\n                  </select>\r\n                 \r\n              </div>\r\n        </div>\r\n        <div class=\"mt-4\">\r\n            <label for=\"\">ພະແນກ ຫຼື ບໍລິສັດ</label>\r\n            <input v-model=\"bookDP\" type=\"text\" class=\"form-control\">\r\n        </div>\r\n          <div class=\"my-4\">\r\n              <label for=\"\">ຊື່ ແລະ ນາມສະກຸນ</label>\r\n              <input v-model=\"bookName\" type=\"text\" class=\"form-control\" required>\r\n          </div>\r\n          <div class=\"my-4\">\r\n              <label for=\"\">ເບີໂທລະສັບ</label>\r\n              <input v-model=\"bookPhone\" type=\"text\" class=\"form-control\" required>\r\n          </div>\r\n          <div class=\"row justify-content-center\">\r\n            <div class=\"my-2 col-6\">\r\n                <button @click=\"goBackAndReload\" type=\"button\" class=\"btn btn-danger w-100\">ຍົກເລີກ</button>\r\n            </div>\r\n            <div class=\"mt-2 col-6\">\r\n              <button type=\"submit\" class=\"btn btn-primary w-100\">ຕົກລົງ</button>\r\n            </div>\r\n          </div>\r\n      </form>\r\n    </div>\r\n    </div>\r\n  </template>\r\n<script>\r\nimport 'flatpickr/dist/flatpickr.css';\r\nimport Swal from 'sweetalert2';\r\nimport { IP_api } from '../../API_config';\r\n\r\nexport default {\r\n  props:{\r\n    roomNumber: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n    data() {\r\n        return {\r\n            // roomNumber: null, \r\n            Rooms:[],\r\n            // \r\n            bookTitle: '',\r\n            bookDate: '',\r\n            bookTimeS: '',\r\n            bookTimeE: '',\r\n            bookDP: '',\r\n            bookName: '',\r\n            bookPhone: '',\r\n            bookRoom: this.roomNumber,\r\n            // \r\n        }\r\n    },\r\n    created() {\r\n      console.log('roomNumber prop:', this.roomNumber);\r\n    },\r\n    computed: {\r\n    minDate() {\r\n        const today = new Date().toISOString().split(\"T\")[0];\r\n        return today;\r\n    },\r\n    startTimes() {\r\n        return this.generateTimeOptions(8, 20, 30);\r\n    },\r\n    endTimes() {\r\n        return this.generateTimeOptions(8, 20, 30);\r\n        },\r\n    },\r\n    mounted() {\r\n        this.fetchRooms();\r\n        console.log(this.roomNumber);\r\n        console.log('Rooms:', this.Rooms);\r\n        console.log('roomNumber:', this.roomNumber);\r\n    },\r\n    methods: {\r\n    async createBooking(){\r\n        const formData = {\r\n            title: this.bookTitle,\r\n            date: this.bookDate,\r\n            startTime: this.bookTimeS,\r\n            endTime: this.bookTimeE,\r\n            department: this.bookDP,\r\n            name: this.bookName,\r\n            phone: this.bookPhone,\r\n            roomNumber: this.bookRoom,\r\n        }\r\n        try {\r\n        const response = await fetch(`${IP_api}/booking/create`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(formData),\r\n        });\r\n        if (response.status === 201) {\r\n          Swal.fire('ການຈອງຂອງທ່ານສຳເລັດ', '', 'success').then(() => {\r\n          // setTimeout(() => {\r\n             \r\n          this.$router.go(-1);\r\n            \r\n          // }, 1000);\r\n          // window.history.back(); \r\n          // window.location.reload();\r\n         });\r\n        //  await new Promise(resolve => setTimeout(resolve, 1000));\r\n        //   window.history.back();\r\n        } else if (response.status === 409) {\r\n          Swal.fire('ຫ້ອງປະຊຸມບໍ່ຫວ່າງ', 'ກະລຸນາປ່ຽນເວລາຂອງທ່ານ', 'error');\r\n        } else {\r\n          Swal.fire('An error occurred', '', 'error');\r\n        }\r\n        } catch (error) {\r\n            \r\n        }\r\n    },\r\n    generateTimeOptions(startHour, endHour, interval) {\r\n      const options = [];\r\n      for (let hour = startHour; hour <= endHour; hour++) {\r\n        for (let minute = 0; minute < 60; minute += interval) {\r\n          const time = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')} ${hour < 12 ? 'ເຊົ້າ' : 'ແລງ'}`;\r\n          options.push(time);\r\n        }\r\n      }\r\n      return options;\r\n    },\r\n    async fetchRooms() {\r\n      try {\r\n        const response = await fetch(`${IP_api}/rooms`);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          this.Rooms = data; // Store the fetched rooms data in the 'rooms' data property\r\n          console.log(this.Rooms); // Print the fetched rooms data to the console\r\n        } else {\r\n          console.error('Error fetching rooms data:', response.status);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching rooms data:', error);\r\n      }\r\n    },\r\n    goBackAndReload() {\r\n      window.history.back();\r\n      \r\n      // Set a delay before reloading the page\r\n      // setTimeout(() => {\r\n      //   location.reload();\r\n      // }, 300);\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./BookingForm.vue?vue&type=template&id=1dcbf7e2\"\nimport script from \"./BookingForm.vue?vue&type=script&lang=js\"\nexport * from \"./BookingForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","type","_createElementBlock","_hoisted_1","onSubmit","_cache","_withModifiers","args","$options","createBooking","action","_hoisted_2","_hoisted_3","$data","bookTitle","$event","_hoisted_4","_hoisted_5","_hoisted_6","bookDate","min","minDate","required","placeholder","_hoisted_8","_hoisted_9","_Fragment","_renderList","Rooms","room","key","_id","roomNumber","toString","$props","title_room","disabled","_hoisted_11","_hoisted_12","_hoisted_13","id","bookTimeS","startTimes","timeOption","value","_hoisted_14","_hoisted_15","_hoisted_16","bookTimeE","endTimes","_hoisted_17","_hoisted_18","_hoisted_19","bookDP","_hoisted_20","_hoisted_21","bookName","_hoisted_22","_hoisted_23","bookPhone","_hoisted_24","_hoisted_25","onClick","goBackAndReload","_hoisted_26","props","Number","data","bookRoom","this","created","console","log","computed","today","Date","toISOString","split","generateTimeOptions","mounted","fetchRooms","methods","formData","title","date","startTime","endTime","department","name","phone","response","fetch","IP_api","method","headers","body","JSON","stringify","status","Swal","then","$router","go","error","startHour","endHour","interval","options","hour","minute","time","padStart","push","ok","json","window","history","back","__exports__","render"],"sourceRoot":""}