{"version":3,"file":"js/971.f7e0923a.js","mappings":"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","sources":["webpack://conference_booking/./src/components/UpdateBook.vue","webpack://conference_booking/./src/components/UpdateBook.vue?f63d"],"sourcesContent":["<template>\r\n    <div>\r\n      <div class=\"container w-100 vh-100 my-auto d-flex align-items-center\">\r\n        <!-- Form content -->\r\n        <form @submit.prevent=\"updateBooking\" action=\"\" class=\"w-50 mx-auto py-2 px-5 bg-light shadow-lg\">\r\n          <div>\r\n              <p class=\"text-center fw-bold\" style=\"font-size: 20px;\">ແກ້ໄຂ</p>\r\n          </div>\r\n          <div class=\"my-2\">\r\n              <label for=\"\">ຫົວຂໍ້ການປະຊຸມ</label>\r\n              <input v-model=\"bookTitle\" type=\"text\" class=\"form-control\" disabled>\r\n          </div>\r\n          <div class=\"row my-4\">\r\n              <div class=\"col-4\">\r\n                  <div class=\"d-flex\">\r\n                    <label class=\"me-5\" for=\"timeInput\">ເວລາເລີ່ມ</label>\r\n                    <!-- <p class=\"text-danger fw-bold \">{{ bookTimeS }}</p> -->\r\n                  </div>\r\n                  <select id=\"timeInput\" class=\"form-control\" v-model=\"bookTimeS\">\r\n                  <option v-for=\"timeOption in formattedTimeOptions\" :key=\"timeOption.value\" :value=\"timeOption.value\">{{ timeOption.label }}</option>\r\n                  </select>\r\n                  \r\n              </div>         \r\n              <div class=\"col-4\">\r\n                  <div class=\"d-flex\">\r\n                    <label class=\"me-5\" for=\"timeInput\">ເວລາສິ້ນສຸດ</label>\r\n                    <!-- <p class=\"text-danger fw-bold\">{{ bookTimeE }}</p> -->\r\n                  </div>\r\n                  <select id=\"timeInput\" class=\"form-control\" v-model=\"bookTimeE\">\r\n                    <option v-for=\"timeOption in formattedTimeOptions\" :key=\"timeOption.value\" :value=\"timeOption.value\">{{ timeOption.label }}</option>\r\n                  </select>              \r\n              </div>\r\n              <div class=\"col-4\">\r\n                <label for=\"\">ວ.ດ.ປ</label>\r\n                <input v-model=\"bookDate\" type=\"date\" class=\"form-control\">\r\n              </div>\r\n        </div>\r\n          <div class=\"my-4\">\r\n              <label for=\"\">ພະແນກ ຫຼື ບໍລິສັດ</label>\r\n              <input v-model=\"bookDP\" type=\"text\" class=\"form-control\" required disabled>\r\n          </div>\r\n          <div class=\"my-4\">\r\n              <label for=\"\">ຊື່ ແລະ ນາມສະກຸນ</label>\r\n              <input v-model=\"bookName\" type=\"text\" class=\"form-control\" required disabled>\r\n          </div>\r\n          <div class=\"my-4\">\r\n              <label for=\"\">ເບີໂທລະສັບ</label>\r\n              <input v-model=\"bookPhone\" type=\"text\" class=\"form-control\" required disabled>\r\n          </div>\r\n          <div class=\"row justify-content-center\">\r\n            <div class=\"my-2 col-6\">\r\n                <button @click=\"goBackAndReload\" type=\"button\" class=\"btn btn-danger w-100\">ຍົກເລີກ</button>\r\n            </div>\r\n            <div class=\"mt-2 col-6\">\r\n              <button type=\"submit\" class=\"btn btn-primary w-100\">ແກ້ໄຂ</button>\r\n            </div>\r\n          </div>\r\n      </form>\r\n    </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import flatpickr from 'flatpickr';\r\n  import 'flatpickr/dist/flatpickr.css';\r\n  import Swal from 'sweetalert2';\r\n  import { IP_api } from '../../API_config';\r\n  \r\n  export default {\r\n    data() {\r\n      return {\r\n        Rooms:'',\r\n        bookId: null, // Capture the booking ID from the route\r\n        // Your other data properties\r\n        bookTitle:'',\r\n        bookDate: '',\r\n        rooms: '',\r\n        bookTimeS: '',\r\n        bookTimeE: '',\r\n        bookDP: '',\r\n        bookName: '',\r\n        bookPhone: '',\r\n        // \r\n        timeOptions: [],\r\n              startTime: 8 * 60, // 8:00 AM in minutes\r\n              endTime: 20 * 60, // 8:00 PM in minutes\r\n              increment: 30, // 30 minutes\r\n              hoursAM: Array.from({ length: 4 }, (_, i) => i + 8), // Array of hours from 8 to 11\r\n              hoursPM: Array.from({ length: 9 }, (_, i) => i + 12), // Array of hours from 12 to 20\r\n              minutes: ['00', '30'], // Minutes options\r\n              meridiem: ['ເຊົ້າ', 'ແລງ'], // AM/PM options\r\n        // \r\n      };\r\n    },\r\n    created() {\r\n      this.bookId = this.$route.params.id; // Get the booking ID from the route\r\n      this.fetchBookingData(); \r\n    },\r\n    computed: {\r\n      minDate() {\r\n          const today = new Date().toISOString().split(\"T\")[0];\r\n          return today;\r\n      },\r\n      formattedTimeOptions() {\r\n        const options = [];\r\n        for (const hour of this.hoursAM) {\r\n          for (const minute of this.minutes) {\r\n            const formattedTime = `${hour.toString().padStart(2, '0')}:${minute} ${this.meridiem[0]}`;\r\n            options.push({ value: formattedTime, label: formattedTime });\r\n          }\r\n        }\r\n        for (const hour of this.hoursPM) {\r\n          for (const minute of this.minutes) {\r\n            const formattedTime = `${hour.toString().padStart(2, '0')}:${minute} ${this.meridiem[1]}`;\r\n            options.push({ value: formattedTime, label: formattedTime });\r\n          }\r\n        }\r\n        return options;\r\n      },\r\n    },\r\n    // created() {\r\n    //   this.fetchRooms();\r\n    // },\r\n    methods: {\r\n      // \r\n      async fetchBookingData() {\r\n        try {\r\n          const response = await fetch(`${IP_api}/booking/${this.bookId}`);\r\n          const data = await response.json();\r\n  \r\n          // Populate form fields with fetched data\r\n          this.bookTitle = data.title;\r\n          this.bookDate = data.date;\r\n          this.rooms = data.roomNumber;\r\n          this.bookTimeS = data.startTime;\r\n          this.bookTimeE = data.endTime;\r\n          this.bookDP = data.department;\r\n          this.bookName = data.name;\r\n          this.bookPhone = data.phone;\r\n          // ... other fields\r\n        } catch (error) {\r\n          console.error('Error fetching booking data:', error);\r\n        }\r\n      },\r\n      async updateBooking() {\r\n        const formData = {\r\n          title: this.bookTitle,\r\n          date: this.bookDate,\r\n          roomNumber: this.rooms,\r\n          startTime: this.bookTimeS,\r\n          endTime: this.bookTimeE,\r\n          department: this.bookDP,\r\n          name: this.bookName,\r\n          phone: this.bookPhone\r\n          // ... other fields\r\n        };\r\n  \r\n        try {\r\n          const response = await fetch(`${IP_api}/booking/update/${this.bookId}`, {\r\n            method: 'PUT',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(formData),\r\n          });\r\n  \r\n          if (response.status === 200) {\r\n            Swal.fire({\r\n            title: 'ແກ້ໄຂການຈອງສຳເລັດ',\r\n            icon: 'success',\r\n            confirmButtonText: 'ຕົກລົງ', // Change the text of the \"OK\" button\r\n          }).then(() => {\r\n            // Redirect back to the list or wherever needed\r\n            this.$router.push({ name: 'admin' });\r\n          });\r\n          } else if(response.status === 409) {\r\n            Swal.fire({\r\n              title: ' ຫ້ອງປະຊຸມບໍ່ຫວ່າງ', \r\n              icon: 'error',\r\n              confirmButtonText: 'ຕົກລົງ'\r\n            })\r\n          }\r\n          else {\r\n            Swal.fire('An error occurred', '', 'error');\r\n          }\r\n        } catch (error) {\r\n          console.error('Error updating booking:', error);\r\n        }\r\n      },\r\n      // Other methods\r\n      goBackAndReload() {\r\n        window.history.back();\r\n        \r\n        // Set a delay before reloading the page\r\n        setTimeout(() => {\r\n          // location.reload();\r\n        }, 300);\r\n      }\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style>\r\n  /* Your styles */\r\n  </style>\r\n  ","import { render } from \"./UpdateBook.vue?vue&type=template&id=7ead0796\"\nimport script from \"./UpdateBook.vue?vue&type=script&lang=js\"\nexport * from \"./UpdateBook.vue?vue&type=script&lang=js\"\n\nimport \"./UpdateBook.vue?vue&type=style&index=0&id=7ead0796&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","for","type","_createElementBlock","_hoisted_1","onSubmit","_cache","_withModifiers","args","$options","updateBooking","action","_hoisted_2","_hoisted_3","_hoisted_4","$data","bookTitle","$event","disabled","_hoisted_5","_hoisted_6","_hoisted_7","id","bookTimeS","_Fragment","_renderList","formattedTimeOptions","timeOption","key","value","label","_hoisted_8","_hoisted_9","_hoisted_10","bookTimeE","_hoisted_11","_hoisted_12","_hoisted_13","bookDate","_hoisted_14","_hoisted_15","bookDP","required","_hoisted_16","_hoisted_17","bookName","_hoisted_18","_hoisted_19","bookPhone","_hoisted_20","_hoisted_21","onClick","goBackAndReload","_hoisted_22","data","Rooms","bookId","rooms","timeOptions","startTime","endTime","increment","hoursAM","Array","from","length","_","i","hoursPM","minutes","meridiem","created","this","$route","params","fetchBookingData","computed","minDate","today","Date","toISOString","split","options","hour","minute","formattedTime","toString","padStart","push","methods","response","fetch","IP_api","json","title","date","roomNumber","department","name","phone","error","console","formData","method","headers","body","JSON","stringify","status","Swal","icon","confirmButtonText","then","$router","window","history","back","setTimeout","__exports__","render"],"sourceRoot":""}